{"componentChunkName":"component---src-templates-post-tsx","path":"/tech/vuejs/initialize-vue-core-function/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://beomy.github.io"}},"file":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/3667f690df14d116a821ba4acb8686fb/f635c/vuejs.png","srcSet":"/static/3667f690df14d116a821ba4acb8686fb/a5da5/vuejs.png 300w,\n/static/3667f690df14d116a821ba4acb8686fb/cadb4/vuejs.png 750w,\n/static/3667f690df14d116a821ba4acb8686fb/feb73/vuejs.png 1080w,\n/static/3667f690df14d116a821ba4acb8686fb/6032c/vuejs.png 1366w,\n/static/3667f690df14d116a821ba4acb8686fb/3d4b2/vuejs.png 1920w,\n/static/3667f690df14d116a821ba4acb8686fb/f635c/vuejs.png 2000w","sizes":"(min-width: 2000px) 2000px, 100vw"},"sources":[{"srcSet":"/static/3667f690df14d116a821ba4acb8686fb/29f5b/vuejs.webp 300w,\n/static/3667f690df14d116a821ba4acb8686fb/11ba1/vuejs.webp 750w,\n/static/3667f690df14d116a821ba4acb8686fb/089e1/vuejs.webp 1080w,\n/static/3667f690df14d116a821ba4acb8686fb/ad4fd/vuejs.webp 1366w,\n/static/3667f690df14d116a821ba4acb8686fb/d8a73/vuejs.webp 1920w,\n/static/3667f690df14d116a821ba4acb8686fb/a28c0/vuejs.webp 2000w","type":"image/webp","sizes":"(min-width: 2000px) 2000px, 100vw"}]},"width":2000,"height":1000}}},"markdownRemark":{"html":"<p>이번 포스트에서는 Vue의 코어 함수를 찾고, Vue의 큰 구조에 대해 이야기 할 것입니다. Vue의 큰 구조를 이해하면, 코드를 분석 할 때, 자세히 봐야할 파일과 그렇지 않아도 되는 파일들을 구분 하는데 도움이 될 수 있습니다.</p>\n<h2 id=\"vue-코어-살펴보기\" style=\"position:relative;\">Vue 코어 살펴보기<a href=\"#vue-%EC%BD%94%EC%96%B4-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"vue 코어 살펴보기 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"/tech/vuejs/introduction-vue-code-analysis/\">1. Introduction - Vue Code 분석</a>에\n서 <code class=\"language-text\">src/platforms/web/entry-runtime-with-compiler.js</code> 파일이 <code class=\"language-text\">import Vue from './runtime/index'</code>로 Vue를 import 하는 것을 확인 했습니다. 이 것을 힌트로 <code class=\"language-text\">src/platforms/web/runtime/index.js</code> 파일을 시작으로 Vue 코어 코드를 살펴보도록 하겠습니다.</p>\n<h3 id=\"srcplatformswebruntimeindexjs-파일\" style=\"position:relative;\"><code class=\"language-text\">src/platforms/web/runtime/index.js</code> 파일<a href=\"#srcplatformswebruntimeindexjs-%ED%8C%8C%EC%9D%BC\" aria-label=\"srcplatformswebruntimeindexjs 파일 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">src/platforms/web/runtime/index.js</code> 파일에서 하는 일들을 살펴보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/* @flow */</span>\n\n<span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'core/index'</span>\n<span class=\"token keyword\">import</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">'core/config'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> extend<span class=\"token punctuation\">,</span> noop <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'shared/util'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mountComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'core/instance/lifecycle'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> devtools<span class=\"token punctuation\">,</span> inBrowser <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'core/util/index'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  query<span class=\"token punctuation\">,</span>\n  mustUseProp<span class=\"token punctuation\">,</span>\n  isReservedTag<span class=\"token punctuation\">,</span>\n  isReservedAttr<span class=\"token punctuation\">,</span>\n  getTagNamespace<span class=\"token punctuation\">,</span>\n  isUnknownElement\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'web/util/index'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> patch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./patch'</span>\n<span class=\"token keyword\">import</span> platformDirectives <span class=\"token keyword\">from</span> <span class=\"token string\">'./directives/index'</span>\n<span class=\"token keyword\">import</span> platformComponents <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/index'</span>\n\n<span class=\"token comment\">// install platform specific utils</span>\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>mustUseProp <span class=\"token operator\">=</span> mustUseProp\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>isReservedTag <span class=\"token operator\">=</span> isReservedTag\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>isReservedAttr <span class=\"token operator\">=</span> isReservedAttr\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>getTagNamespace <span class=\"token operator\">=</span> getTagNamespace\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>isUnknownElement <span class=\"token operator\">=</span> isUnknownElement\n\n<span class=\"token comment\">// install platform runtime directives &amp; components</span>\n<span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>directives<span class=\"token punctuation\">,</span> platformDirectives<span class=\"token punctuation\">)</span>\n<span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">,</span> platformComponents<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// install platform patch function</span>\n<span class=\"token class-name\">Vue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__patch__ <span class=\"token operator\">=</span> inBrowser <span class=\"token operator\">?</span> patch <span class=\"token operator\">:</span> noop\n\n<span class=\"token comment\">// public mount method</span>\n<span class=\"token class-name\">Vue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">$mount</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">el<span class=\"token operator\">?</span><span class=\"token operator\">:</span> string <span class=\"token operator\">|</span> Element<span class=\"token punctuation\">,</span>\n  hydrating<span class=\"token operator\">?</span><span class=\"token operator\">:</span> boolean</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Component <span class=\"token punctuation\">{</span>\n  el <span class=\"token operator\">=</span> el <span class=\"token operator\">&amp;&amp;</span> inBrowser <span class=\"token operator\">?</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">mountComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> hydrating<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// devtools global hook</span>\n<span class=\"token comment\">/* istanbul ignore next */</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>inBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>devtools<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>devtools<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        devtools<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'init'</span><span class=\"token punctuation\">,</span> Vue<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n        process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">&amp;&amp;</span>\n        process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'test'</span>\n      <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">[</span>console<span class=\"token punctuation\">.</span>info <span class=\"token operator\">?</span> <span class=\"token string\">'info'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'log'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">'Download the Vue Devtools extension for a better development experience:\\n'</span> <span class=\"token operator\">+</span>\n          <span class=\"token string\">'https://github.com/vuejs/vue-devtools'</span>\n        <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">&amp;&amp;</span>\n      process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'test'</span> <span class=\"token operator\">&amp;&amp;</span>\n      config<span class=\"token punctuation\">.</span>productionTip <span class=\"token operator\">!==</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">&amp;&amp;</span>\n      <span class=\"token keyword\">typeof</span> console <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">[</span>console<span class=\"token punctuation\">.</span>info <span class=\"token operator\">?</span> <span class=\"token string\">'info'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'log'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You are running Vue in development mode.\\n</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Make sure to turn on production mode when deploying for production.\\n</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">See more tips at https://vuejs.org/guide/deployment.html</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Vue</code></pre></div>\n<ul>\n<li><code class=\"language-text\">Vue</code>를 import 합니다. <code class=\"language-text\">Vue</code>를 또 다시 import 하는 것에 주목합시다.</li>\n<li><code class=\"language-text\">config</code>를 import 합니다.</li>\n<li>유틸 함수들을 import 합니다.</li>\n<li><code class=\"language-text\">patch</code>, <code class=\"language-text\">mountComponent</code>를 import 합니다. <code class=\"language-text\">patch</code>와 <code class=\"language-text\">mountComponent</code> 함수는 view를 업데이트 하는 핵심부분입니다. 이번 포스트에서 언급했다는 것만 기억하고, 자세한 내용은 <a href=\"/tech/vuejs/view-render-patch/\">9. View Render - Patch</a>에서 이야기 하도록 하겠습니다.</li>\n<li><code class=\"language-text\">platformDirectives</code>(directive 들..), <code class=\"language-text\">platformComponents</code>(component 들..)을 import 합니다.</li>\n<li>특정한 플랫폼 유틸들을 install 합니다.(<code class=\"language-text\">// install platform specific utils</code> 주석으로 기록된 부분)</li>\n<li>플랫폼 directive와 component를 install 합니다.(<code class=\"language-text\">// install platform runtime directives &amp; components</code> 주석으로 기록된 부분)</li>\n<li><code class=\"language-text\">patch</code> 함수를 install 합니다.(<code class=\"language-text\">// install platform patch function</code> 주석으로 기록된 부분) <code class=\"language-text\">patch</code> 함수가 <code class=\"language-text\">Vue.prototype.__patch__</code>로 매칭되었다는 것만 기억합시다. 자세한 내용은 <a href=\"/tech/vuejs/view-render-patch/\">9. View Render - Patch</a>에서 이야기 하도록 하겠습니다.</li>\n<li><code class=\"language-text\">mount</code> 메소드를 정의 합니다.(<code class=\"language-text\">// public mount method</code> 주석으로 기록된 부분)</li>\n<li>Vue Devtools와 개발 모드에서의 경고 메시지를 <code class=\"language-text\">console.log</code>로 출력 합니다.</li>\n</ul>\n<p>코드를 통해 볼 수 있 듯이 이 파일은 Vue에 몇가지 플랫폼 동작들을 추가하는 일들을 합니다.</p>\n<p>2가지 내용을 집중해야 합니다.</p>\n<ol>\n<li><code class=\"language-text\">Vue.prototype.__patch__ = inBrowser ? patch : noop</code>은 웹페이지를 업데이트 하는 역할을 합니다. 즉, DOM을 조작하는 역할을 합니다. <a href=\"/tech/vuejs/view-render-patch/\">9. View Render - Patch</a>에서 자세히 다루어 보도록 하겠습니다.</li>\n<li><code class=\"language-text\">Vue.prototype.$mount</code>는 <code class=\"language-text\">mountComponent</code>를 호출하는 역할을 합니다. <code class=\"language-text\">$mount</code>는 이전 포스트에서 몇가지 검증을 추가하여 캡슐화 된다고 이야기 했습니다. 이 파일에서 한번더 캡슐화 되어 2번 캡슐화 됩니다. <code class=\"language-text\">mountComponent</code> 함수도 view를 업데이트 하는 핵심 함수입니다. <a href=\"/tech/vuejs/view-render-patch/\">9. View Render - Patch</a>에서 자세히 다루어 보도록 하겠습니다.</li>\n</ol>\n<p><code class=\"language-text\">import Vue from 'core/index'</code>에서 Vue 파일라고 정의 되어 있는 <code class=\"language-text\">src/core/index.js</code> 파일을 따라가 보도록 하겠습니다.</p>\n<h3 id=\"srccoreindexjs-파일\" style=\"position:relative;\"><code class=\"language-text\">src/core/index.js</code> 파일<a href=\"#srccoreindexjs-%ED%8C%8C%EC%9D%BC\" aria-label=\"srccoreindexjs 파일 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'./instance/index'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> initGlobalAPI <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./global-api/index'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> isServerRendering <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'core/util/env'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FunctionalRenderContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'core/vdom/create-functional-component'</span>\n\n<span class=\"token function\">initGlobalAPI</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Vue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'$isServer'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">get</span><span class=\"token operator\">:</span> isServerRendering\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Vue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'$ssrContext'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">get</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* istanbul ignore next */</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$vnode <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$vnode<span class=\"token punctuation\">.</span>ssrContext\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// expose FunctionalRenderContext for ssr runtime helper installation</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">,</span> <span class=\"token string\">'FunctionalRenderContext'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> FunctionalRenderContext\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nVue<span class=\"token punctuation\">.</span>version <span class=\"token operator\">=</span> <span class=\"token string\">'__VERSION__'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Vue</code></pre></div>\n<p>이 파일에서는 전역 api들을 설정합니다. <code class=\"language-text\">import Vue from './instance/index'</code>를 보고 <code class=\"language-text\">src/core/instance/index.js</code> 파일을 따라가 보도록 하겠습니다.</p>\n<h3 id=\"srccoreinstanceindexjs-파일\" style=\"position:relative;\"><code class=\"language-text\">src/core/instance/index.js</code> 파일<a href=\"#srccoreinstanceindexjs-%ED%8C%8C%EC%9D%BC\" aria-label=\"srccoreinstanceindexjs 파일 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> initMixin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./init'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> stateMixin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./state'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> renderMixin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./render'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> eventsMixin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./events'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> lifecycleMixin <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./lifecycle'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> warn <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../util/index'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Vue</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Vue is a constructor and should be called with the `new` keyword'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">initMixin</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span>\n<span class=\"token function\">stateMixin</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span>\n<span class=\"token function\">eventsMixin</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span>\n<span class=\"token function\">lifecycleMixin</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span>\n<span class=\"token function\">renderMixin</span><span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Vue</code></pre></div>\n<p><code class=\"language-text\">function Vue (option)</code> 드디어 찾던 Vue의 코어 함수입니다. Vue 코어 부분은 <code class=\"language-text\">this._init</code>만 호출하는 굉장히 짧은 코드입니다. <code class=\"language-text\">src/core/instance/index.js</code>에서 하는 일들을 살펴보도록 하겠습니다.</p>\n<ul>\n<li>5개의 mixin을 import 합니다.</li>\n<li>Vue 인스턴스를 생성하는 함수를 정의 합니다.</li>\n<li>Vue에 5개의 mixin을 install 합니다.</li>\n</ul>\n<h2 id=\"vue의-layer\" style=\"position:relative;\">Vue의 Layer<a href=\"#vue%EC%9D%98-layer\" aria-label=\"vue의 layer permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Vue는 큰 프로젝트입니다. 그래서 Vue는 많은 Layer와 part들로 나누어져 있습니다. Vue는 크게 4가지로 Layer로 구성됩니다.</p>\n<p><img src=\"/assets/img/posts/vuejs/vue_layer.png\" alt=\"Vue layer\"></p>\n<ul>\n<li><strong>Core Layer</strong>: Vue 코어 함수입니다. <code class=\"language-text\">this._init()</code>을 호출합니다. <code class=\"language-text\">src/core/instance/index.js</code>에서 살펴 볼 수 있습니다.</li>\n<li><strong>Mixins Layer</strong>: init, state, events, lifecycle, render, 5개의 mixin 함수를 Vue 코어에 추가 합니다. <code class=\"language-text\">src/core/instance/index.js</code>에서 살펴 볼 수 있습니다.</li>\n<li><strong>Platform Layer</strong>: 몇가지 동작들을 Vue 코어에 추가합니다. <code class=\"language-text\">Vue.prototype.__patch__</code>와 <code class=\"language-text\">Vue.prototype.$mount</code>를 추가합니다. <code class=\"language-text\">src/platforms/web/runtime/index.js</code>에서 살펴 볼 수 있습니다.</li>\n<li><strong>Entry Layer</strong>: config와 캡슐화 된 $mount의 가장 바깥쪽 <code class=\"language-text\">$mount</code>를 Vue 코어에 추가합니다. <code class=\"language-text\">src/platforms/web/entry-runtime-with-compiler.js</code>에서 살펴 볼 수 있습니다.</li>\n</ul>\n<p>이렇게 여러개의 layer로 구성한다면 몇가지 장점이 있습니다.</p>\n<ol>\n<li>관심사를 분리 할 수 있습니다. 각각의 layer는 서로 다른 일들을 하게 됩니다.</li>\n<li>캡슐화 할 수 있습니다. 각각의 layer는 각자의 일에만 집중하면 됩니다.</li>\n<li>재사용 할 수 있습니다. 코어에 가까울수록 일반적(generic)을 코드가 됩니다. 이로 인해 다른 플랫폼에 쉽게 호환이 되고, 다른 환경에서 쉽게 구축할 수 있습니다.</li>\n</ol>\n<h2 id=\"요약\" style=\"position:relative;\">요약<a href=\"#%EC%9A%94%EC%95%BD\" aria-label=\"요약 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">src/platforms/web/runtime/index.js</code>를 시작으로 <code class=\"language-text\">src/core/instance/index.js</code>에 도달하여 Vue 코어 함수를 찾았습니다. <code class=\"language-text\">src/core/instance/index.js</code> 파일은 Vue 함수를 <code class=\"language-text\">export</code> 하게 되는데, <code class=\"language-text\">export</code>되는 Vue 함수는 5개의 mixin가 추가된 Vue 함수입니다. Vue 함수는 <code class=\"language-text\">this_init</code> 함수를 호출하여 초기화 합니다.</p>\n<h2 id=\"다음으로-볼-것\" style=\"position:relative;\">다음으로 볼 것<a href=\"#%EB%8B%A4%EC%9D%8C%EC%9C%BC%EB%A1%9C-%EB%B3%BC-%EA%B2%83\" aria-label=\"다음으로 볼 것 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>다음 포스트에서는 Core 함수에서 호출한 하는 5개의 mixin를 <a href=\"/tech/vuejs/initialize-mixin-layer/\">3. Initialize - Mixin Layer</a>에서 좀 더 자세히 살펴 볼 것입니다.</p>\n<h5 id=\"참고\" style=\"position:relative;\">참고<a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<ul>\n<li><a href=\"https://github.com/numbbbbb/read-vue-source-code/blob/master/02-dig-into-the-core.md\">https://github.com/numbbbbb/read-vue-source-code/blob/master/02-dig-into-the-core.md</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#vue-%EC%BD%94%EC%96%B4-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\">Vue 코어 살펴보기</a></p>\n<ul>\n<li><a href=\"#srcplatformswebruntimeindexjs-%ED%8C%8C%EC%9D%BC\"><code class=\"language-text\">src/platforms/web/runtime/index.js</code> 파일</a></li>\n<li><a href=\"#srccoreindexjs-%ED%8C%8C%EC%9D%BC\"><code class=\"language-text\">src/core/index.js</code> 파일</a></li>\n<li><a href=\"#srccoreinstanceindexjs-%ED%8C%8C%EC%9D%BC\"><code class=\"language-text\">src/core/instance/index.js</code> 파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#vue%EC%9D%98-layer\">Vue의 Layer</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9A%94%EC%95%BD\">요약</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%9D%8C%EC%9C%BC%EB%A1%9C-%EB%B3%BC-%EA%B2%83\">다음으로 볼 것</a></p>\n</li>\n</ul>","timeToRead":6,"excerpt":"이번 포스트에서는 Vue의 코어 함수를 찾고, Vue의 큰 구조에 대해 이야기 할 것입니다. Vue의 큰 구조를 이해하면, 코드를 분석 할 때, 자세히 봐야할 파일과 그렇지 않아도 되는 파일들을 구분 하는데 도움이 될 수 있습니다. Vue…","frontmatter":{"title":"[Inside Vue] 2. Initialize - Vue 코어 함수","thumbnail":"vuejs/vuejs.png","summary":"Vue의 큰 구조와 Vue의 코어 함수를 살펴볼 것입니다."},"fields":{"createdDate":"2019-09-05"}}},"pageContext":{"slug":"/tech/vuejs/initialize-vue-core-function/","image":"vuejs/vuejs.png","next":{"frontmatter":{"title":"[Inside Vue] 3. Initialize - Mixin Layer"},"fields":{"slug":"/tech/vuejs/initialize-mixin-layer/"}},"previous":{"frontmatter":{"title":"[Inside Vue] 1. Introduction - Vue Code 분석"},"fields":{"slug":"/tech/vuejs/introduction-vue-code-analysis/"}}}},"staticQueryHashes":["1817256549","2192852387","3417480192"]}